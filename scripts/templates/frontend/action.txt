import { generateJoinableInputField } from '~/services/view'
import { ActionDefinition } from '~/types/action'
import { UserEntity } from '../entities'

export const {{ actionName }}: ActionDefinition = {
  routeKey: '{{ actionName }}',
  operationName: '{{ actionName }}',
  title: '{{ capitalizedActionName }}',
  icon: 'mdi-code-tags',
  fields: [
    {
      fieldKey: 'item',
      inputDefinition: generateJoinableInputField({
        entity: UserEntity,
      }),
      hideIfLocked: true,
    },
    {
      fieldKey: 'code',
      inputDefinition: {
        text: 'Code',
      },
    },
  ],

  getLockedFields: (that, item) => {
    return {
      'item.id': item.id,
    }
  },

  onSuccess: (that, item) => {
    // reload interfaces
    // that.$root.$emit('refresh-interface', 'someType')

    that.$root.$emit('showSnackbar', {
      message: `Action succeeded`,
      color: 'success',
    })
  },
}
